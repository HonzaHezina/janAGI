{
  "name": "WF_01_Ingest_Message (skeleton)",
  "nodes": [
    {
      "name": "Webhook (Telegram or API)",
      "type": "n8n-nodes-base.webhook",
      "parameters": {
        "path": "ingest-message",
        "httpMethod": "POST"
      }
    },
    {
      "name": "Insert message (Postgres)",
      "type": "n8n-nodes-base.postgres",
      "parameters": {
        "operation": "executeQuery",
        "query": "-- TODO (rag.*): call rag.start_run_for_thread + rag.log_event('message','user')"
      }
    },
    {
      "name": "Embed (Mistral)",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "https://api.mistral.ai/v1/embeddings",
        "method": "POST",
        "authentication": "predefinedCredentialType",
        "sendBody": true,
        "jsonParameters": true,
        "options": {}
      }
    },
    {
      "name": "Insert document (pgvector)",
      "type": "n8n-nodes-base.postgres",
      "parameters": {
        "operation": "executeQuery",
        "query": "-- TODO (rag.*): insert into rag.documents + rag.chunks (embedding)"
      }
    }
  ],
  "connections": {}
}
